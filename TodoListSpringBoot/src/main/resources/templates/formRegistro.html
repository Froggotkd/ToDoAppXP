<!-- registro.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments :: head('Registro')"></head>
<body class="register-page">
  <div class="register-card">
    <h3 class="text-center mb-4">Únete a nuestra Comunidad</h3>
    <div class="step-indicator">
      <div class="step active"><div class="circle">1</div><small>Datos</small></div>
      <div class="step"><div class="circle">2</div><small>Verificar</small></div>
      <div class="step"><div class="circle">3</div><small>¡Listo!</small></div>
    </div>
    <form method="post" th:action="@{/registro}" th:object="${registroData}">
      <div class="mb-3 input-group">
        <span class="input-group-text"><i class="fa fa-envelope"></i></span>
        <input id="eMail" class="form-control" type="email"
               th:field="*{email}"
               placeholder="Correo electrónico"
               required />
      </div>
      <div class="mb-3 input-group">
        <span class="input-group-text"><i class="fa fa-user"></i></span>
        <input id="nombre" class="form-control"
               th:field="*{nombre}"
               placeholder="Tu nombre" />
      </div>
      <div class="mb-3 input-group">
        <span class="input-group-text"><i class="fa fa-lock"></i></span>
        <input id="password" class="form-control" type="password"
               th:field="*{password}"
               placeholder="Contraseña"
               required />
      </div>
      <div class="mb-3 input-group">
        <span class="input-group-text"><i class="fa fa-calendar-alt"></i></span>
        <input id="fechaNacimiento" class="form-control" type="date"
               th:field="*{fechaNacimiento}" />
      </div>
      <div class="form-check mb-3" th:if="${!existeAdmin}">
        <input class="form-check-input" type="checkbox"
               id="esAdministrador"
               th:field="*{esAdministrador}" />
        <label class="form-check-label" for="esAdministrador">
          Registrarse como administrador
        </label>
      </div>
      <div class="d-grid">
        <button type="submit" class="btn register-btn text-white">
          Crear Cuenta
        </button>
      </div>
      <p class="text-center mt-3">
        <a href="/login">¿Ya tienes cuenta? Inicia sesión</a>
      </p>
      <div th:if="${#fields.hasErrors('*')}" class="alert alert-danger mt-3">
        <ul>
          <li th:each="err : ${#fields.errors('*')}" th:text="${err}"></li>
        </ul>
      </div>
      <div th:if="${error != null}" class="alert alert-danger mt-3">
        <span th:text="${error}"></span>
      </div>
    </form>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
